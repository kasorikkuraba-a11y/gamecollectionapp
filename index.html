<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚²ãƒ¼ãƒ ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .dark {
            background: linear-gradient(to bottom right, #1f2937, #111827);
        }
        .light {
            background: linear-gradient(to bottom right, #faf5ff, #eff6ff);
        }
        .transition-all {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="light min-h-screen p-6 transition-all" id="body">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6 transition-all" id="header">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-3xl font-bold text-gray-800" id="title">ğŸ® ã‚²ãƒ¼ãƒ ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</h1>
                <button onclick="toggleDarkMode()" class="p-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition" id="themeBtn">
                    <span id="themeIcon">ğŸŒ™</span>
                </button>
            </div>
            
            <div class="flex flex-col md:flex-row gap-4 mb-4">
                <!-- Search -->
                <div class="flex-1 relative">
                    <input type="text" id="searchInput" placeholder="ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«ã‚„ã‚¸ãƒ£ãƒ³ãƒ«ã§æ¤œç´¢..." 
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" 
                           onkeyup="filterGames()">
                </div>

                <!-- Filters -->
                <div class="flex gap-2">
                    <select id="platformFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="filterGames()">
                        <option value="all">å…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </option>
                    </select>

                    <select id="statusFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="filterGames()">
                        <option value="all">å…¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</option>
                        <option value="unplayed">æœªãƒ—ãƒ¬ã‚¤</option>
                        <option value="playing">ãƒ—ãƒ¬ã‚¤ä¸­</option>
                        <option value="completed">ã‚¯ãƒªã‚¢æ¸ˆã¿</option>
                        <option value="on-hold">ä¿ç•™ä¸­</option>
                    </select>
                </div>

                <!-- Add Button -->
                <button onclick="toggleAddForm()" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition whitespace-nowrap">
                    â• è¿½åŠ 
                </button>
            </div>

            <!-- Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center" id="stats">
                <div class="bg-gray-50 p-3 rounded-lg">
                    <div class="text-2xl font-bold text-gray-800" id="totalCount">0</div>
                    <div class="text-sm text-gray-600">ç·æ•°</div>
                </div>
                <div class="bg-blue-50 p-3 rounded-lg">
                    <div class="text-2xl font-bold text-blue-600" id="playingCount">0</div>
                    <div class="text-sm text-gray-600">ãƒ—ãƒ¬ã‚¤ä¸­</div>
                </div>
                <div class="bg-green-50 p-3 rounded-lg">
                    <div class="text-2xl font-bold text-green-600" id="completedCount">0</div>
                    <div class="text-sm text-gray-600">ã‚¯ãƒªã‚¢æ¸ˆã¿</div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                    <div class="text-2xl font-bold text-gray-600" id="unplayedCount">0</div>
                    <div class="text-sm text-gray-600">æœªãƒ—ãƒ¬ã‚¤</div>
                </div>
            </div>
        </div>

        <!-- Add Form -->
        <div id="addForm" class="bg-white rounded-lg shadow-lg p-6 mb-6 hidden transition-all">
            <h2 class="text-xl font-bold text-gray-800 mb-4">æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’è¿½åŠ </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="text" id="gameTitle" placeholder="ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ« *" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                <input type="text" id="gamePlatform" placeholder="ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  (ä¾‹: Nintendo Switch) *" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                <input type="text" id="gameGenre" placeholder="ã‚¸ãƒ£ãƒ³ãƒ« (ä¾‹: RPG, ã‚¢ã‚¯ã‚·ãƒ§ãƒ³)" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                <select id="gameStatus" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                    <option value="unplayed">æœªãƒ—ãƒ¬ã‚¤</option>
                    <option value="playing">ãƒ—ãƒ¬ã‚¤ä¸­</option>
                    <option value="completed">ã‚¯ãƒªã‚¢æ¸ˆã¿</option>
                    <option value="on-hold">ä¿ç•™ä¸­</option>
                </select>
                <input type="date" id="gamePurchaseDate" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                <input type="text" id="gameNotes" placeholder="ãƒ¡ãƒ¢" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
            </div>
            <div class="flex gap-2 mt-4">
                <button onclick="addGame()" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">è¿½åŠ </button>
                <button onclick="toggleAddForm()" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            </div>
        </div>

        <!-- Games List -->
        <div id="gamesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
    </div>

    <script>
        let games = [];
        let darkMode = false;

        // Load data
        function loadData() {
            const savedGames = localStorage.getItem('games');
            const savedTheme = localStorage.getItem('darkMode');
            
            if (savedGames) {
                games = JSON.parse(savedGames);
            }
            
            if (savedTheme === 'true') {
                darkMode = true;
                applyDarkMode();
            }
            
            updatePlatformFilter();
            renderGames();
            updateStats();
        }

        // Dark mode
        function toggleDarkMode() {
            darkMode = !darkMode;
            localStorage.setItem('darkMode', darkMode);
            applyDarkMode();
        }

        function applyDarkMode() {
            const body = document.getElementById('body');
            const header = document.getElementById('header');
            const addForm = document.getElementById('addForm');
            const themeIcon = document.getElementById('themeIcon');
            const themeBtn = document.getElementById('themeBtn');
            const title = document.getElementById('title');
            
            if (darkMode) {
                body.classList.remove('light');
                body.classList.add('dark');
                header.classList.remove('bg-white');
                header.classList.add('bg-gray-800');
                addForm.classList.remove('bg-white');
                addForm.classList.add('bg-gray-800');
                title.classList.remove('text-gray-800');
                title.classList.add('text-white');
                themeIcon.textContent = 'â˜€ï¸';
                themeBtn.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                themeBtn.classList.add('bg-gray-700', 'text-yellow-400', 'hover:bg-gray-600');
            } else {
                body.classList.remove('dark');
                body.classList.add('light');
                header.classList.remove('bg-gray-800');
                header.classList.add('bg-white');
                addForm.classList.remove('bg-gray-800');
                addForm.classList.add('bg-white');
                title.classList.remove('text-white');
                title.classList.add('text-gray-800');
                themeIcon.textContent = 'ğŸŒ™';
                themeBtn.classList.remove('bg-gray-700', 'text-yellow-400', 'hover:bg-gray-600');
                themeBtn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
            }
        }

        // Toggle add form
        function toggleAddForm() {
            const form = document.getElementById('addForm');
            form.classList.toggle('hidden');
        }

        // Add game
        function addGame() {
            const title = document.getElementById('gameTitle').value;
            const platform = document.getElementById('gamePlatform').value;
            const genre = document.getElementById('gameGenre').value;
            const status = document.getElementById('gameStatus').value;
            const purchaseDate = document.getElementById('gamePurchaseDate').value;
            const notes = document.getElementById('gameNotes').value;

            if (!title || !platform) {
                alert('ã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¯å¿…é ˆã§ã™');
                return;
            }

            const game = {
                id: Date.now(),
                title,
                platform,
                genre,
                status,
                purchaseDate,
                notes
            };

            games.push(game);
            localStorage.setItem('games', JSON.stringify(games));

            // Clear form
            document.getElementById('gameTitle').value = '';
            document.getElementById('gamePlatform').value = '';
            document.getElementById('gameGenre').value = '';
            document.getElementById('gameStatus').value = 'unplayed';
            document.getElementById('gamePurchaseDate').value = '';
            document.getElementById('gameNotes').value = '';

            toggleAddForm();
            updatePlatformFilter();
            renderGames();
            updateStats();
        }

        // Delete game
        function deleteGame(id) {
            if (confirm('ã“ã®ã‚²ãƒ¼ãƒ ã‚’å‰Šé™¤ã—ã¾ã™ã‹?')) {
                games = games.filter(game => game.id !== id);
                localStorage.setItem('games', JSON.stringify(games));
                updatePlatformFilter();
                renderGames();
                updateStats();
            }
        }

        // Update game status
        function updateStatus(id, newStatus) {
            const game = games.find(g => g.id === id);
            if (game) {
                game.status = newStatus;
                localStorage.setItem('games', JSON.stringify(games));
                renderGames();
                updateStats();
            }
        }

        // Update platform filter
        function updatePlatformFilter() {
            const platformFilter = document.getElementById('platformFilter');
            const platforms = [...new Set(games.map(g => g.platform))];
            
            const currentValue = platformFilter.value;
            platformFilter.innerHTML = '<option value="all">å…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </option>';
            
            platforms.forEach(platform => {
                const option = document.createElement('option');
                option.value = platform;
                option.textContent = platform;
                platformFilter.appendChild(option);
            });
            
            platformFilter.value = currentValue;
        }

        // Filter games
        function filterGames() {
            renderGames();
        }

        // Render games
        function renderGames() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const platformFilter = document.getElementById('platformFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            
            const filteredGames = games.filter(game => {
                const matchesSearch = game.title.toLowerCase().includes(searchTerm) || 
                                    game.genre.toLowerCase().includes(searchTerm);
                const matchesPlatform = platformFilter === 'all' || game.platform === platformFilter;
                const matchesStatus = statusFilter === 'all' || game.status === statusFilter;
                return matchesSearch && matchesPlatform && matchesStatus;
            });

            const gamesList = document.getElementById('gamesList');
            
            if (filteredGames.length === 0) {
                gamesList.innerHTML = `<div class="col-span-full text-center py-12 ${darkMode ? 'text-gray-400' : 'text-gray-500'}">${games.length === 0 ? 'ã‚²ãƒ¼ãƒ ã‚’è¿½åŠ ã—ã¦ãã ã•ã„' : 'è©²å½“ã™ã‚‹ã‚²ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'}</div>`;
                return;
            }

            gamesList.innerHTML = filteredGames.map(game => {
                const statusLabels = {
                    'unplayed': 'æœªãƒ—ãƒ¬ã‚¤',
                    'playing': 'ãƒ—ãƒ¬ã‚¤ä¸­',
                    'completed': 'ã‚¯ãƒªã‚¢æ¸ˆã¿',
                    'on-hold': 'ä¿ç•™ä¸­'
                };
                
                const statusColors = {
                    'unplayed': 'bg-gray-100 text-gray-700',
                    'playing': 'bg-blue-100 text-blue-700',
                    'completed': 'bg-green-100 text-green-700',
                    'on-hold': 'bg-yellow-100 text-yellow-700'
                };

                return `
                    <div class="${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-lg shadow-md p-4 hover:shadow-lg transition-all">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg ${darkMode ? 'text-white' : 'text-gray-800'} flex-1">${game.title}</h3>
                            <button onclick="deleteGame(${game.id})" class="text-red-500 hover:text-red-700 transition">ğŸ—‘ï¸</button>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="${darkMode ? 'text-gray-300' : 'text-gray-600'}">
                                <span class="font-semibold">ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ :</span> ${game.platform}
                            </div>
                            ${game.genre ? `<div class="${darkMode ? 'text-gray-300' : 'text-gray-600'}"><span class="font-semibold">ã‚¸ãƒ£ãƒ³ãƒ«:</span> ${game.genre}</div>` : ''}
                            <div>
                                <select onchange="updateStatus(${game.id}, this.value)" class="px-3 py-1 rounded-full text-sm font-medium ${statusColors[game.status]}">
                                    <option value="unplayed" ${game.status === 'unplayed' ? 'selected' : ''}>æœªãƒ—ãƒ¬ã‚¤</option>
                                    <option value="playing" ${game.status === 'playing' ? 'selected' : ''}>ãƒ—ãƒ¬ã‚¤ä¸­</option>
                                    <option value="completed" ${game.status === 'completed' ? 'selected' : ''}>ã‚¯ãƒªã‚¢æ¸ˆã¿</option>
                                    <option value="on-hold" ${game.status === 'on-hold' ? 'selected' : ''}>ä¿ç•™ä¸­</option>
                                </select>
                            </div>
                            ${game.purchaseDate ? `<div class="${darkMode ? 'text-gray-300' : 'text-gray-600'}"><span class="font-semibold">è³¼å…¥æ—¥:</span> ${game.purchaseDate}</div>` : ''}
                            ${game.notes ? `<div class="${darkMode ? 'text-gray-300 border-gray-600' : 'text-gray-600 border-gray-200'} mt-2 pt-2 border-t">${game.notes}</div>` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Update stats
        function updateStats() {
            document.getElementById('totalCount').textContent = games.length;
            document.getElementById('playingCount').textContent = games.filter(g => g.status === 'playing').length;
            document.getElementById('completedCount').textContent = games.filter(g => g.status === 'completed').length;
            document.getElementById('unplayedCount').textContent = games.filter(g => g.status === 'unplayed').length;
        }

        // Initialize
        loadData();
    </script>
</body>
</html>
